\documentclass{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage[margin=0.5in]{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{a4paper}                   		% ... or a4paper or a5paper or ...

\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or eps with pdflatex; use eps in DVI mode
\usepackage{enumerate}								% TeX will automatically convert eps --> pdf in pdflatex		


\title{Lab 10.1:  Intalling and Trying Bacula\\ IN719 Systems Administration}
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle

\section*{Introduction}
Bacula is a powerful backup management system that will let you define and run backup and restore jobs across your network.  Because it's a powerful system, it's also complex.  Today we'll install Bacula and run through a basic backup and restore operation.  Later we will configure Bacula to run proper backups on our networks.

\section*{Step-by-step}
Carry out the following procudure on your \texttt{backup} server.

\begin{enumerate}
  \item Use \texttt{apt-get} to install the \texttt{bacula-server} package\footnote{We will bypass Puppet for today's lab, but you should create puppet modules for Bacula later.}.  At one point you will be asked if you want to use SQLite; say yes to this.  

  \item Install the \texttt{bacula-client} package.

  \item Bacula's configuration files are in \texttt{/etc/bacula}. We will edit two of them today.
        \begin{enumerate}
            \item In \texttt{/etc/bacula/bacula-sd.conf}, look for the \emph{Device} section named "FileStorage".  Change the \emph{Archive Device} to 
	          \texttt{/home/bacula/storage}.

	    \item In \texttt{/etc/bacula/bacula-dir.conf}, look for the \emph{Job} section named \emph{RestoreFiles}.  Change the \emph{Where} property
	          to \texttt{/home/bacula/restores}.

	    \item In the \emph{FileSet} section just below this, change the \emph{File} property to \texttt{/home/bacula/data-to-backup}.
	\end{enumerate}

	You can learn a lot about Bacula just from inspecting these configuration files, so be sure to do so.

  \item Since we have modified the configuration files, we will need to use the \texttt{service} command to reload the services 
        \texttt{bacula-director} and \texttt{bacula-sd} (e.g., \texttt{service bacula-director reload}).

  \item Create the directories \texttt{/home/bacula/storage}, \texttt{/home/bacula/restores}, and \texttt{/home/bacula/data-to-backup}.
        Change the owner of the first two to \texttt{bacula}.

  \item Create some files in \texttt{/home/bacula/data-to-backup}.

  \item Now you are ready to run some backup and restore jobs.  Open a second ssh session to your \texttt{backup} server. In it, run the 
        \texttt{bconsole} command.  The next several commands take place inside the \texttt{bconsole}.

\end{enumerate}

\end{document}
